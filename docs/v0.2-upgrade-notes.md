# N1Hub v0.2 Upgrade Notes

## What Changed
- **Single interface surface.** The App Router at `app/` now hosts `/`, `/inbox`, `/capsules`, `/capsules/[id]`, `/graph`, and `/chat`; all interface components, libs, Vitest setup, and SSE proxies live at the repo root and import from `components/*` + `lib/*`.
- **Vector dimension & chunk alignment.** `apps/engine` now centralizes the embedding dimension (`384`, matching `infra/sql/0004_update_vector_dimension.sql`), generates deterministic chunk IDs, and raises a privacy guard if PII slips into tags/keywords/vector hints.
- **Observability & SSE.** Health probes keep checking Redis/pgvector with the configured dimension, `/events/stream` exposes job updates, and the UI job list connects to the SSE proxy via `app/api/events/stream/route.ts`.
- **Guardrail/CI hardening.** Added `tools/privacy_scan.py`, `tools/validate_capsule_alignment.py`, and a GitHub Action that runs lint/typecheck, Vitest, Pytest, schema validation, and the privacy scan.
- **Docs + changelog.** `README`, deployment docs, CONTRIBUTING, env references, templates, and the new `docs/v0.2-upgrade-notes.md` / `CHANGELOG.md` capture the new structure and release rationale.

## Why
This release closes the drift between the two UIs, ensures the engineâ€™s embedding shape is always aligned with Postgres/pgvector, catches privacy violations early, and makes tests/CI guardrails reflect the governance contracts described in the v0.1 capsule spec.

## How to Verify
1. `pnpm install --prefer-offline`
2. `pnpm lint` and `pnpm typecheck`
3. `pnpm test:ui`
4. `python -m pip install -r apps/engine/requirements.txt`
5. `PYTHONPATH=apps/engine pytest -q`
6. `python tools/validate_capsule_alignment.py`
7. `python tools/privacy_scan.py`
8. Smoke the UI by hitting `/api/events/stream` via the job list and watching the `/inbox` SSE banner.

